<html>
<head>
<title>WFH Calculator</title>
</head>
<body>
<b>Employee Time Calculator</b><br><br>
<lable> IN Time:</lable>
<input type="time" id="inTime"> <br><br>
<lable> OUT Time:</lable>
<input type="time" id="outTime"> <br><br>

<button onclick="calculateTime()">Calculate</button>
<p id="worked"></p>

<p id="difference"></p>

<p id="interval"></p>

<p id="intervals"></p>

<script>
function calculateTime(){
var inTime= document.getElementById("inTime").value;
var outTime= document.getElementById("outTime").value;

// *****Difference from IN and OUT ****//
if(!inTime || !outTime){
document.getElementById("result").innerText="Please enter times";
return;
}

var inDate = new Date("1970-01-01T" + inTime+ ":00");
var outDate = new Date("1970-01-01T" + outTime+ ":00");

var diffMs = outDate - inDate;
if(diffMs < 0){
document.getElementById("result").innerText="OutTime is lesser than InTime";
return;
}

var diffHours = Math.floor(diffMs/ (1000*60*60));
var diffMins= Math.floor((diffMs % (1000*60*60))/ (1000*60));

document.getElementById("worked").innerText =
"Worked Time: " + diffHours + "hours " + diffMins + "minutes";

// *****Difference from 9:15 ****//
var workedMins = diffMs / (1000*60);
var requiredMins = (9*60)+15;

var differenceMinutes = requiredMins - workedMins;

if(differenceMinutes >0){
var hours = Math.floor(differenceMinutes/60);
var minutes = Math.floor(differenceMinutes%60);

document.getElementById("difference").innerText =
"Remaining Time: " + hours + "hours " + minutes + "minutes";
}

// *****Remaining Interval from 9:15 ****//
var startWFH = new Date(outDate.getTime() + (1*60000));
var endWFH = new Date(startWFH.getTime() + (differenceMinutes * 60000));

function formatTime(date){
var hours1 = date.getHours().toString().padStart(2, '0');
var minutes1 = date.getMinutes().toString().padStart(2, '0');
return hours1 + ":" + minutes1;
}
document.getElementById("interval").innerText =
"Exact WFH Interval Time: " + formatTime(startWFH) + " to " + formatTime(endWFH);

// *****Catchy Interval for 9:15 ****//

function roundQuarter(date){
let mins = date.getMinutes();
let remainder = 15-(mins%15);
if(remainder === 15) remainder =0;
let newDate = new Date(date.getTime() + remainder *60000);
newDate.setSeconds(0);
return newDate;
}

let options = "";
let baseStart = new Date(outDate);

for(let i=1; i<=3; i++)
{
let tempStart = new Date(baseStart.getTime() + i*15 *60000);
roundStart = roundQuarter(tempStart);

let tempEnd = new Date(roundStart.getTime() + differenceMinutes *60000);
roundEnd = roundQuarter(tempEnd);

const intervalMinutes = Math.floor((roundEnd - roundStart)/60000);
const totalMinutes = workedMins + intervalMinutes;
const totalHours = Math.floor(totalMinutes/60);
const totalMins = totalMinutes % 60;

options += formatTime(roundStart) + " to " + formatTime(roundEnd) + 
 " ->Total Hours you Covered: " +totalHours+ " h " + totalMins+ " min<br>";
}
document.getElementById("intervals").innerHTML =
"Suggested WFH Interval Time: <br>" + options;

}
</script>
<script>
document.addEventListener("contextmenu", e => {
e.preventDefault();
});

document.addEventListener("keydown", e => {
if(
(e.ctrlKey && e.key === "u") ||
(e.ctrlKey && e.key === "s") ||
(e.ctrlKey && e.key === "c") ||
e.key === "F12")
{e.preventDefault();
}
});
</script>

</body>
</html>
